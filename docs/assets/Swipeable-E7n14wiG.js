import{r as l,j as i,d as U,h as $,F as q,B as W,I as B}from"./index-D9xIr4Uz.js";import{C as V}from"./index-DE8sWj5Z.js";import{S as J}from"./index-4uuVAPlP.js";import{G as K}from"./index-DEg7z9An.js";function Q(t){const e=["RIGHT","UP_RIGHT","UP","UP_LEFT","LEFT","DOWN_LEFT","DOWN","DOWN_RIGHT"],r=Math.round(t/45)%8;return e[r]}function O(t){const e=Math.round(t.angle),r=Math.max(1,Math.ceil(t.percent*5));return{direction:t.direction,angle:e,strength:r}}const Z="_root_81ln7_1",tt="_overlay_81ln7_11",G={root:Z,overlay:tt};function et({width:t=300,height:e=220,threshold:r=10,showOverlay:h=!0,fadeOutMs:y=300,className:P,onStart:g,onMove:v,onEnd:E,children:T,label:F,circleFill:D="currentColor"}){const p=l.useRef(null),d=l.useRef(null),a=l.useRef(null),m=l.useRef(null),L=l.useRef(!1),[S,_]=l.useState(null),[n,b]=l.useState(null);l.useEffect(()=>()=>{m.current&&cancelAnimationFrame(m.current)},[]);function I(o,c){const u=c.x-o.x,s=c.y-o.y,x=Math.hypot(u,s),k=(Math.atan2(-s,u)*(180/Math.PI)+360)%360,z=Math.hypot(t,e),X=Math.min(1,x/z),Y=Q(k);return{start:o,current:c,dx:u,dy:s,distance:x,angle:k,direction:Y,percent:X}}function A(){m.current=null;const o=d.current,c=a.current;if(!o||!c)return;const u=I(o,c);if(u.distance>=r&&v){const s=O(u);v(s)}h&&b(s=>({visible:!0,x1:o.x,y1:o.y,x2:c.x,y2:c.y,fading:!1})),_(null)}function w(){m.current==null&&(m.current=requestAnimationFrame(A))}const f=o=>{if(o.pointerType==="mouse"&&o.button!==0)return;const c=p.current;if(!c)return;c.setPointerCapture(o.pointerId),L.current=!0;const u=c.getBoundingClientRect(),s={x:o.clientX-u.left,y:o.clientY-u.top};d.current=s,a.current=s,g&&g(s),h&&b({visible:!0,x1:s.x,y1:s.y,x2:s.x,y2:s.y,fading:!1}),o.preventDefault()},R=o=>{if(!L.current)return;const c=p.current;if(!c)return;const u=c.getBoundingClientRect();a.current={x:o.clientX-u.left,y:o.clientY-u.top},w()},C=o=>N(o),j=()=>N();function N(o){if(!L.current)return;L.current=!1,m.current&&(cancelAnimationFrame(m.current),m.current=null);const c=d.current,u=a.current;if(!c||!u)return;const s=I(c,u);if(s.distance>=r&&E){const x=O(s);E({summary:x,details:s})}b({visible:!0,x1:c.x,y1:c.y,x2:u.x,y2:u.y,fading:!1}),_(u),window.setTimeout(()=>{b(x=>x&&{...x,fading:!0}),window.setTimeout(()=>b(null),y)},10);try{const x=p.current;x&&"releasePointerCapture"in x&&o?.pointerId!=null&&x.releasePointerCapture(o.pointerId)}catch{}d.current=null,a.current=null}const M={width:t,height:e};return i.jsxs("div",{ref:p,className:U(G.root,P),style:M,onPointerDown:f,onPointerMove:R,onPointerUp:C,onPointerCancel:j,"aria-label":F,children:[T||null,i.jsxs("svg",{width:"100%",height:"100%",viewBox:`0 0 ${t} ${e}`,className:G.overlay,preserveAspectRatio:"none",children:[S?i.jsx("circle",{cx:S.x,cy:S.y,r:18,fill:D}):null,n?i.jsxs("g",{style:{opacity:n.fading?0:1,transition:`opacity ${y}ms ease-out`},children:[i.jsx("circle",{cx:n.x1,cy:n.y1,r:6,fill:"currentColor",opacity:.15}),i.jsx("line",{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,stroke:"currentColor",strokeWidth:4,strokeLinecap:"round"})]}):null]})]})}const nt=["button","a[href]","input","textarea","select",'[role="button"]'].join(",");function rt(t){const e=["RIGHT","UP_RIGHT","UP","UP_LEFT","LEFT","DOWN_LEFT","DOWN","DOWN_RIGHT"],r=Math.round(t/45)%8;return e[r]}function H(t,e,r,h){const y=e.x-t.x,P=e.y-t.y,g=Math.hypot(y,P),E=(Math.atan2(-P,y)*(180/Math.PI)+360)%360,T=Math.hypot(r,r),F=Math.min(1,g/T),D=Math.max(1,T-h),p=Math.max(0,g-h),d=Math.round(p/D*100),a=rt(E);return{start:t,current:e,dx:y,dy:P,distance:g,angle:E,direction8:a,percent:F,strengthPercent:d}}function ot(t,e){return Math.abs(t)>=Math.abs(e)?t>=0?"RIGHT":"LEFT":e<=0?"UP":"DOWN"}function ct(t){return t<.13?"close":t<.36?"fair":"far"}function st(t,e={}){const{threshold:r=20,lockAxis:h=null,allowedDirections:y=null,preventDefaultOnSwipe:P=!1,ignoreInteractive:g=!0,size:v=null,onSwipe:E}=e,T=l.useRef(null);T.current=E??null;const F=l.useRef(null),D=t??F,p=l.useRef(null),d=l.useRef(null),a=l.useRef(null),m=l.useRef(!1),[L,S]=l.useState(!1);function _(n,b){a.current==null&&(a.current=requestAnimationFrame(()=>{a.current=null;const I=p.current,A=d.current;if(!I||!A)return;const w=H(I,A,n,r);h==="x"&&Math.abs(w.dy)>Math.abs(w.dx)||h==="y"&&Math.abs(w.dx)>Math.abs(w.dy)}))}return l.useEffect(()=>{const n=D.current;if(!n)return;function b(f){if(f.pointerType==="mouse"&&f.button!==0)return;if(g){const j=f.target;if(j&&j.closest&&j.closest(nt))return}try{n.setPointerCapture?.(f.pointerId)}catch{}m.current=!0,S(!0);const R=n.getBoundingClientRect(),C={x:f.clientX-R.left,y:f.clientY-R.top};p.current=C,d.current=C}function I(f){if(!m.current)return;const R=n.getBoundingClientRect();d.current={x:f.clientX-R.left,y:f.clientY-R.top};const C=v??Math.max(R.width||1,R.height||1);_(C)}function A(f){if(!m.current)return;m.current=!1,a.current&&(cancelAnimationFrame(a.current),a.current=null),S(!1);const R=n.getBoundingClientRect(),C=p.current,j=d.current;if(!C||!j)return;const N=v??Math.max(R.width||1,R.height||1),M=H(C,j,N,r);if(h==="x"&&Math.abs(M.dy)>Math.abs(M.dx)){p.current=null,d.current=null;try{n.releasePointerCapture?.(f.pointerId)}catch{}return}if(h==="y"&&Math.abs(M.dx)>Math.abs(M.dy)){p.current=null,d.current=null;try{n.releasePointerCapture?.(f.pointerId)}catch{}return}if(M.distance>=r){const o=ot(M.dx,M.dy),c=ct(M.percent),u={direction4:o,distanceHuman:c};if(!y||y.includes(M.direction8)){const s=T.current;if(typeof s=="function")try{s(u,M)}catch{}if(P)try{f.preventDefault()}catch{}}}try{n.releasePointerCapture?.(f.pointerId)}catch{}p.current=null,d.current=null}function w(){m.current=!1,a.current&&(cancelAnimationFrame(a.current),a.current=null),S(!1),p.current=null,d.current=null}return n.addEventListener("pointerdown",b),n.addEventListener("pointermove",I),n.addEventListener("pointerup",A),n.addEventListener("pointercancel",w),()=>{n.removeEventListener("pointerdown",b),n.removeEventListener("pointermove",I),n.removeEventListener("pointerup",A),n.removeEventListener("pointercancel",w),a.current&&(cancelAnimationFrame(a.current),a.current=null)}},[D,r,h,y,P,g,v]),{ref:D,isSwiping:L}}function it(t){const{touchAction:e,lock:r,threshold:h=16,onEnd:y,children:P,classNames:g}=t,v=l.useRef(null),{ref:E,isSwiping:T}=st(v,{threshold:h,...$(r)&&{lockAxis:r},onSwipe:F=>{y(F)}});return i.jsx("div",{ref:E,style:{touchAction:e},className:U(g?.root,T&&g?.isSwiping),children:P({isSwiping:T})})}function pt(){const[t,e]=l.useState("default");return i.jsxs(i.Fragment,{children:[i.jsx(it,{lock:"x",touchAction:"pan-x",classNames:{root:"theme",isSwiping:"noise-scroll"},onEnd:r=>{if(r.direction4==="LEFT"){e("pin");return}e("delete")},children:({isSwiping:r})=>i.jsx(J,{...!r&&t==="delete"&&{startWidth:"69px",start:i.jsx(W.Negative,{isIcon:!0,onClick:()=>{console.log("Are u sure u wanna delete me ?"),e("default")},children:i.jsx(B.X,{size:28})})},...!r&&t==="pin"&&{endWidth:"69px",end:i.jsx(W.Positive,{isIcon:!0,onClick:()=>{console.log("Are u sure u wanna pin me ?"),e("default")},children:i.jsx(B.Add,{size:28})})},dangerous:{gap:"var(--gap-3)!important"},children:i.jsxs(K,{gap:{xs:"var(--gap-3)"},gridTemplateColumns:{xs:"var(--min-height) 1fr"},dangerous:{alignItems:"center"},children:[i.jsx(V,{}),i.jsx(q.Bold,{clamp:1,children:"Task description "})]})})}),i.jsx("br",{}),i.jsx(et,{className:"theme negative",label:"joystick",onEnd:({summary:{direction:r}})=>{if(r.endsWith("LEFT")){e("pin");return}else{e("delete");return}}}),i.jsx("br",{})]})}export{pt as default};
