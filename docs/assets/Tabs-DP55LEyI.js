import{r as f,N as B,O as W,P as S,Q as U,U as m,V as X,W as Q,X as Y,Y as Z,Z as q,a0 as v,a1 as G,a2 as N,a3 as M,a4 as j,a5 as k,a6 as V,a7 as J,a8 as _,j as o,F as D,l as ee,B as C,I as w}from"./index-CMDqP-Hg.js";import{$ as te,a as le,b as ie,c as ae,d as se,e as ne,f as O,g as de,h as re,i as oe}from"./SelectionIndicator-CfvqCGQA.js";import{$ as ce,a as z,b as ue,c as fe}from"./useHover-D8IsrP5d.js";function E(l){const e=f.version.split(".");return parseInt(e[0],10)>=19?l:l?"true":void 0}function be(l,e){let t=e?.isDisabled,[i,a]=f.useState(!1);return B(()=>{if(l?.current&&!t){let r=()=>{if(l.current){let d=W(l.current,{tabbable:!0});a(!!d.nextNode())}};r();let s=new MutationObserver(r);return s.observe(l.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{s.disconnect()}}}),t?!1:i}const A=new WeakMap;function F(l,e,t){return l?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${A.get(l)}-${t}-${e}`):""}function $e(l,e,t){let{key:i,isDisabled:a,shouldSelectOnPressUp:r}=l,{selectionManager:s,selectedKey:d}=e,n=i===d,c=a||e.isDisabled||e.selectionManager.isDisabled(i),{itemProps:u,isPressed:b}=te({selectionManager:s,key:i,ref:t,isDisabled:c,shouldSelectOnPressUp:r,linkBehavior:"selection"}),$=F(e,i,"tab"),g=F(e,i,"tabpanel"),{tabIndex:y}=u,h=e.collection.getItem(i),K=S(h?.props,{labelable:!0});delete K.id;let p=ce(h?.props),{focusableProps:x}=U({isDisabled:c},t);return{tabProps:m(K,x,p,u,{id:$,"aria-selected":n,"aria-disabled":c||void 0,"aria-controls":n?g:void 0,tabIndex:c?void 0:y,role:"tab"}),isSelected:n,isDisabled:c,isPressed:b}}function ye(l,e,t){let i=be(t)?void 0:0;var a;const r=F(e,(a=l.id)!==null&&a!==void 0?a:e?.selectedKey,"tabpanel"),s=z({...l,id:r,"aria-labelledby":F(e,e?.selectedKey,"tab")});return{tabPanelProps:m(s,{tabIndex:i,role:"tabpanel","aria-describedby":l["aria-describedby"],"aria-details":l["aria-details"]})}}class ve{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,i;return this.disabledKeys.has(e)||!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,i,a=new Set){this.collection=e,this.flipDirection=t==="rtl"&&i==="horizontal",this.disabledKeys=a,this.tabDirection=i==="horizontal"}}function he(l,e,t){let{orientation:i="horizontal",keyboardActivation:a="automatic"}=l,{collection:r,selectionManager:s,disabledKeys:d}=e,{direction:n}=X(),c=f.useMemo(()=>new ve(r,n,i,d),[r,d,i,n]),{collectionProps:u}=le({ref:t,selectionManager:s,keyboardDelegate:c,selectOnFocus:a==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),b=Q();A.set(e,b);let $=z({...l,id:b});return{tabListProps:{...m(u,$),role:"tablist","aria-orientation":i,tabIndex:void 0}}}class I{*[Symbol.iterator](){yield*this.iterable}get size(){return this._size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);var i;return t&&(i=t.prevKey)!==null&&i!==void 0?i:null}getKeyAfter(e){let t=this.keyMap.get(e);var i;return t&&(i=t.nextKey)!==null&&i!==void 0?i:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return t?.childNodes||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let t=d=>{if(this.keyMap.set(d.key,d),d.childNodes&&d.type==="section")for(let n of d.childNodes)t(n)};for(let d of e)t(d);let i=null,a=0,r=0;for(let[d,n]of this.keyMap)i?(i.nextKey=d,n.prevKey=i.key):(this.firstKey=d,n.prevKey=void 0),n.type==="item"&&(n.index=a++),(n.type==="section"||n.type==="item")&&r++,i=n,i.nextKey=void 0;this._size=r;var s;this.lastKey=(s=i?.key)!==null&&s!==void 0?s:null}}function xe(l){let{filter:e,layoutDelegate:t}=l,i=ie(l),a=f.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),r=f.useCallback(c=>e?new I(e(c)):new I(c),[e]),s=f.useMemo(()=>({suppressTextValueWarning:l.suppressTextValueWarning}),[l.suppressTextValueWarning]),d=ae(l,r,s),n=f.useMemo(()=>new se(d,i,{layoutDelegate:t}),[d,i,t]);return ge(d,n),{collection:d,disabledKeys:a,selectionManager:n}}function ge(l,e){const t=f.useRef(null);f.useEffect(()=>{if(e.focusedKey!=null&&!l.getItem(e.focusedKey)&&t.current){const u=t.current.getItem(e.focusedKey),b=[...t.current.getKeys()].map(p=>{const x=t.current.getItem(p);return x?.type==="item"?x:null}).filter(p=>p!==null),$=[...l.getKeys()].map(p=>{const x=l.getItem(p);return x?.type==="item"?x:null}).filter(p=>p!==null);var i,a;const g=((i=b?.length)!==null&&i!==void 0?i:0)-((a=$?.length)!==null&&a!==void 0?a:0);var r,s,d;let y=Math.min(g>1?Math.max(((r=u?.index)!==null&&r!==void 0?r:0)-g+1,0):(s=u?.index)!==null&&s!==void 0?s:0,((d=$?.length)!==null&&d!==void 0?d:0)-1),h=null,K=!1;for(;y>=0;){if(!e.isDisabled($[y].key)){h=$[y];break}if(y<$.length-1&&!K)y++;else{K=!0;var n,c;y>((n=u?.index)!==null&&n!==void 0?n:0)&&(y=(c=u?.index)!==null&&c!==void 0?c:0),y--}}e.setFocusedKey(h?h.key:null)}t.current=l},[l,e])}function Ke(l){var e;let[t,i]=ue(l.selectedKey,(e=l.defaultSelectedKey)!==null&&e!==void 0?e:null,l.onSelectionChange),a=f.useMemo(()=>t!=null?[t]:[],[t]),{collection:r,disabledKeys:s,selectionManager:d}=xe({...l,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:a,onSelectionChange:c=>{if(c==="all")return;var u;let b=(u=c.values().next().value)!==null&&u!==void 0?u:null;b===t&&l.onSelectionChange&&l.onSelectionChange(b),i(b)}}),n=t!=null?r.getItem(t):null;return{collection:r,disabledKeys:s,selectionManager:d,selectedKey:t,setSelectedKey:i,selectedItem:n}}function pe(l){var e,t;let i=Ke({...l,onSelectionChange:l.onSelectionChange?n=>{var c;n!=null&&((c=l.onSelectionChange)===null||c===void 0||c.call(l,n))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=l.defaultSelectedKey)!==null&&e!==void 0?e:R(l.collection,l.disabledKeys?new Set(l.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:a,collection:r,selectedKey:s}=i,d=f.useRef(s);return f.useEffect(()=>{let n=s;l.selectedKey==null&&(a.isEmpty||n==null||!r.getItem(n))&&(n=R(r,i.disabledKeys),n!=null&&a.setSelectedKeys([n])),(n!=null&&a.focusedKey==null||!a.isFocused&&n!==d.current)&&a.setFocusedKey(n),d.current=n}),{...i,isDisabled:l.isDisabled||!1}}function R(l,e){let t=null;if(l){var i,a,r,s;for(t=l.getFirstKey();t!=null&&(e.has(t)||!((a=l.getItem(t))===null||a===void 0||(i=a.props)===null||i===void 0)&&i.isDisabled)&&t!==l.getLastKey();)t=l.getKeyAfter(t);t!=null&&(e.has(t)||!((s=l.getItem(t))===null||s===void 0||(r=s.props)===null||r===void 0)&&r.isDisabled)&&t===l.getLastKey()&&(t=l.getFirstKey())}return t}const T=f.createContext(null),P=f.createContext(null),me=f.forwardRef(function(e,t){[e,t]=q(e,t,T);let{children:i,orientation:a="horizontal"}=e;return i=f.useMemo(()=>typeof i=="function"?i({orientation:a,defaultChildren:null}):i,[i,a]),v.createElement(G,{content:i},r=>v.createElement(Pe,{props:e,collection:r,tabsRef:t}))});function Pe({props:l,tabsRef:e,collection:t}){let{orientation:i="horizontal"}=l,a=pe({...l,collection:t,children:void 0}),{focusProps:r,isFocused:s,isFocusVisible:d}=j({within:!0}),n=f.useMemo(()=>({orientation:i,isFocusWithin:s,isFocusVisible:d}),[i,s,d]),c=k({...l,defaultClassName:"react-aria-Tabs",values:n}),u=S(l,{global:!0});return v.createElement("div",{...m(u,c,r),ref:e,slot:l.slot||void 0,"data-focused":s||void 0,"data-orientation":i,"data-focus-visible":d||void 0,"data-disabled":a.isDisabled||void 0},v.createElement(V,{values:[[T,l],[P,a]]},c.children))}const Se=f.forwardRef(function(e,t){return f.useContext(P)?v.createElement(De,{props:e,forwardedRef:t}):v.createElement(N,e)});function De({props:l,forwardedRef:e}){let t=f.useContext(P),{CollectionRoot:i}=f.useContext(O),{orientation:a="horizontal",keyboardActivation:r="automatic"}=J(T),s=M(e),{tabListProps:d}=he({...l,orientation:a,keyboardActivation:r},t,s),n=k({...l,children:null,defaultClassName:"react-aria-TabList",values:{orientation:a,state:t}}),c=S(l,{global:!0});return delete c.id,v.createElement("div",{...m(c,n,d),ref:s,"data-orientation":a||void 0},v.createElement(re,null,v.createElement(i,{collection:t.collection,persistedKeys:oe(t.selectionManager.focusedKey)})))}class H extends _{}H.type="item";const Fe=Y(H,(l,e,t)=>{let i=f.useContext(P),a=M(e),{tabProps:r,isSelected:s,isDisabled:d,isPressed:n}=$e({key:t.key,...l},i,a),{focusProps:c,isFocused:u,isFocusVisible:b}=j(),{hoverProps:$,isHovered:g}=fe({isDisabled:d,onHoverStart:l.onHoverStart,onHoverEnd:l.onHoverEnd,onHoverChange:l.onHoverChange}),y=k({...l,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:s,isDisabled:d,isFocused:u,isFocusVisible:b,isPressed:n,isHovered:g}}),h=t.props.href?"a":"div",K=S(l,{global:!0});return delete K.id,delete K.onClick,v.createElement(h,{...m(K,y,r,c,$),ref:a,"data-selected":s||void 0,"data-disabled":d||void 0,"data-focused":u||void 0,"data-focus-visible":b||void 0,"data-pressed":n||void 0,"data-hovered":g||void 0},v.createElement(ne.Provider,{value:{isSelected:s}},y.children))}),ke=Z(function(e,t){const i=f.useContext(P);let a=M(t),{id:r,...s}=e,{tabPanelProps:d}=ye(e,i,a),{focusProps:n,isFocused:c,isFocusVisible:u}=j(),b=i.selectedKey===e.id,$=k({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:u,isInert:E(!b),state:i}});if(!b&&!e.shouldForceMount)return null;let g=S(s,{global:!0});delete g.id;let y=b?m(g,d,n,$):$;return v.createElement("div",{...y,ref:a,"data-focused":c||void 0,"data-focus-visible":u||void 0,inert:E(!b||e.inert),"data-inert":b?void 0:"true"},v.createElement(V,{values:[[T,null],[P,null]]},v.createElement(O.Provider,{value:de},$.children)))});function L(l){const{tabs:e,label:t,...i}=l;return o.jsx(o.Fragment,{children:o.jsxs(me,{...i,children:[o.jsx(Se,{"aria-label":t,items:e,children:a=>o.jsx(Fe,{className:"my-tab",children:a.title})}),o.jsx(N,{items:e,children:a=>o.jsx(ke,{children:a.children})})]})})}function Ce(){const[l,e]=f.useState([{id:1,title:"Tab 1",children:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx(D,{children:" Tab body 1"})]})},{id:2,title:"Tab 2",children:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx(D,{children:" Tab body 2"})," "]})},{id:3,title:"Tab 3",children:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx(D,{children:" Tab body 3"})]})}]),[t,i]=f.useState(1),a=()=>{e(s=>[...s,{id:s.length+1,title:`Tab ${s.length+1}`,children:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsxs(D,{children:[" Tab body $",s.length+1]})]})}])},r=()=>{l.length>1&&e(s=>s.slice(0,-1))};return o.jsxs(o.Fragment,{children:[o.jsxs(ee,{label:"Add/Remov tabs ",dangerous:{boxShadow:"var(--shadow)",border:"var(--border)"},children:[o.jsx(C.Transparent,{border:!1,isIcon:!0,onClick:a,children:o.jsx(w.Add,{})}),o.jsx(C.Transparent,{border:!1,isIcon:!0,onClick:r,children:o.jsx(w.X,{})})]}),o.jsx("br",{}),o.jsx(L,{tabs:l,label:"Tabs horizontal",selectedKey:t,onSelectionChange:i}),o.jsx("br",{}),o.jsx(L,{tabs:l,label:"Tabs vertical",orientation:"vertical"}),o.jsx("br",{})]})}export{Ce as default};
