import{r,$ as b,i as I,j as e,d as k,k as T,l as w,p as A,m as z,n as L,G as N,B as h,F as S,I as V,c as _}from"./index-91GS2LDO.js";import{C as j}from"./index-drF4VquR.js";import{S as R}from"./index-DkBAyaQM.js";const F="_dialog_1s8oi_1",$="_overlay_1s8oi_10",H="_tray_1s8oi_26",U="_isOpen_1s8oi_45",P="_sheet_1s8oi_49",B="_sentinel_1s8oi_83",C={dialog:F,overlay:$,tray:H,isOpen:U,sheet:P,sentinel:B};function G({onClose:n,children:t,isOpen:s,...l}){const i=r.useRef(null),{keyboardProps:c}=b({onKeyDown:a=>{a.key==="Escape"&&s&&(a.preventDefault(),n())}});return s?I.createPortal(e.jsx("div",{...l,ref:i,className:k(l.className,C.dialog),tabIndex:-1,role:"dialog","aria-modal":"true",...c,children:e.jsx(T,{contain:!0,restoreFocus:!0,autoFocus:!0,children:t})}),document.body):null}function K({isOpen:n,onClose:t,trigger:s,unTrigger:l,children:i,className:c}){const a=r.useRef(null),d=r.useRef(null),o=r.useRef(null),f=r.useCallback(()=>{t(),d.current?.scrollIntoView({behavior:"smooth"})},[t]);r.useEffect(()=>{n?o.current?.scrollIntoView({behavior:"smooth"}):d.current?.scrollIntoView({behavior:"smooth"})},[n]);const{keyboardProps:x}=b({onKeyDown:p=>{(p.key==="Escape"||p.key==="C")&&n&&(p.preventDefault(),t())}});return e.jsxs(e.Fragment,{children:[s?.({isOpen:n}),e.jsxs("div",{ref:a,className:k(C.sheet,c),"data-open":n?"true":"false","aria-hidden":!n,...x,children:[e.jsx("div",{ref:d,className:C.sentinel}),e.jsx("menu",{ref:o,className:C.menu,"aria-label":"Actions",children:i}),e.jsx("menu",{className:C.menu,children:l({isOpen:n,onClose:f})})]})]})}function M(){const[n,t]=r.useState(()=>D());return r.useEffect(()=>{const s=()=>t(D());return visualViewport?visualViewport.addEventListener("resize",s):window.addEventListener("resize",s),()=>{visualViewport?visualViewport.removeEventListener("resize",s):window.removeEventListener("resize",s)}},[]),n}function D(){return{width:window?.visualViewport?.width??window?.innerWidth,height:window?.visualViewport?.height??window?.innerHeight}}function W({children:n,onClose:t,isOpen:s,...l}){const i=r.useRef(null),{keyboardProps:c}=b({onKeyDown:p=>{p.key==="Escape"&&s&&(p.preventDefault(),t())}}),a=M(),[d,o]=r.useState(a.height),f=r.useRef(0);r.useEffect(()=>{clearTimeout(f.current),a.height<d&&a.height<window.innerHeight?f.current=setTimeout(()=>{o(a.height)},500):o(a.height)},[d,a.height]);const x={"--tray-min-height":`${d}px`};return s?I.createPortal(e.jsx("div",{className:C.overlay,children:e.jsx("div",{...c,...l,ref:i,className:k(C.tray,C.isOpen),tabIndex:-1,role:"dialog","aria-modal":"true",style:x,children:e.jsx(T,{contain:!0,restoreFocus:!0,autoFocus:!0,children:n})})}),document.body):null}const q=["dialog","tray","sheet"],O=["cart"],v=[...q,...O];function Q(){const[n,t]=w("dialogs",A(v)),s=()=>t(v[0]),l=()=>t(v[1]),i=()=>t(v[2]),c=()=>t(O[0]),a=()=>t(null),[d,o]=w("selection",z(L)),f=r.useCallback(m=>o(y=>{const g=y??[];return g.includes(m)?g:[...g,m]}),[o]),x=r.useCallback(m=>o(y=>(y??[]).filter(g=>g!==m)),[o]),p=r.useCallback(m=>o(y=>{const g=y??[];return g.includes(m)?g.filter(E=>E!==m):[...g,m]}),[o]),u=r.useCallback(()=>o(null),[o]);return{onClose:a,dialogs:n,onOpenSheet:i,onOpenTray:l,onOpenDialog:s,onOpenCart:c,selection:d,toggleSelection:p,addToSelection:f,removeFromSelection:x,clearSelection:u}}function X(n){const[t,s]=w("looseURL",A(n));return{state:t,onClose:()=>s(null),onOpen:c=>s(c)}}function ee(){const{onOpenTray:n,onOpenDialog:t,onOpenSheet:s,dialogs:l,onClose:i}=Q(),c=l==="tray",a=l==="dialog",d=l==="sheet",{state:o,onOpen:f,onClose:x}=X(["xoxo"]),p=o==="xoxo";return e.jsxs(e.Fragment,{children:[e.jsxs(N.Row,{flexWrap:"wrap",children:[e.jsx(h,{onClick:()=>t(),children:"Dialog open"}),e.jsx(h,{onClick:()=>n(),children:"Tray open"}),e.jsx(h,{onClick:()=>f("xoxo"),children:"Tray open 2"}),e.jsxs(K,{trigger:({isOpen:u})=>e.jsx(h,{type:"button",onClick:()=>s(),"aria-expanded":u,children:"Show action sheet"}),unTrigger:({onClose:u})=>e.jsx(h,{type:"reset",onClick:u,children:"Cancel"}),isOpen:d,onClose:()=>i(),children:[e.jsx(h,{onClick:u=>u.preventDefault(),children:"Action 1"}),e.jsx(h,{onClick:u=>u.preventDefault(),children:"Action 2"}),e.jsx(h,{onClick:u=>u.preventDefault(),children:"Action 3"})]})]}),e.jsx("br",{}),e.jsx(G,{isOpen:a,onClose:()=>i(),children:e.jsxs(j,{component:"div",ratio:"landscape",dangerous:{width:"min(750px,80vw)"},children:[e.jsxs(j.Title,{dangerous:{display:"flex",alignItems:"center",borderBottom:"var(--border)",minHeight:"var(--min-height)",padding:"0 var(--gap-2) 0 var(--gap-3)"},children:[e.jsx(S,{children:"Lorem ipsun dolor"}),e.jsx(h.Icon,{className:"ml-a",onClick:()=>i(),isText:!0,children:e.jsx(V.X,{size:36,circle:!1})})]}),e.jsx(j.Content,{dangerous:{placeContent:"center",textAlign:"center"},children:e.jsx(R.Triangle,{size:50})}),e.jsx(j.Actions,{dangerous:{display:"flex",alignItems:"center",borderTop:"var(--border)",minHeight:"var(--min-height)",justifyContent:"flex-end",padding:"var(--gap-2) var(--gap-4) var(--gap-2)"},children:e.jsx(h,{onClick:()=>i(),children:"Close"})})]})}),e.jsx(W,{isOpen:c||p,onClose:_(i,x),children:e.jsxs(j,{component:"div",dangerous:{width:"min(750px,80vw)"},children:[e.jsx(j.Title,{dangerous:{display:"flex",placeContent:"center",borderBottom:"var(--border)",height:"var(--min-height)"},children:e.jsx(S,{children:"Lorem ipsun dolor"})}),e.jsx(j.Content,{dangerous:{placeContent:"center",textAlign:"center"},children:e.jsx(R.Square,{size:50})}),e.jsx(j.Actions,{className:"mt-a",dangerous:{display:"flex",alignItems:"center"},children:e.jsx(h,{stretch:!0,onClick:_(i,x),children:"Close"})})]})})]})}export{ee as default};
