import{r,j as e,c as S,$ as T,u as v,p as D,d as L,e as N,B as p,b as _}from"./index-5usdHAzP.js";import{$ as k}from"./useKeyboard-DSNFmm-f.js";import{$ as O}from"./index-C4IZMPVY.js";import{C as y}from"./index-DBoC6BUh.js";import{G as $}from"./index-DAISTjvQ.js";import{S as j}from"./index-D4Ln3QfG.js";const I="_dialog_1re3o_1",V="_overlay_1re3o_13",z="_tray_1re3o_29",F="_isOpen_1re3o_48",U="_sheet_1re3o_52",P="_sentinel_1re3o_86",C={dialog:I,overlay:V,tray:z,isOpen:F,sheet:U,sentinel:P};function H({onClose:n,children:t,isOpen:o,...a}){const l=r.useRef(null),{keyboardProps:c}=k({onKeyDown:i=>{i.key==="Escape"&&o&&(i.preventDefault(),n())}});return o?O.createPortal(e.jsx("div",{...a,ref:l,className:S(a.className,C.dialog),tabIndex:-1,role:"dialog","aria-modal":"true",...c,children:e.jsx(T,{contain:!0,restoreFocus:!0,autoFocus:!0,children:t})}),document.body):null}function G({isOpen:n,onClose:t,trigger:o,unTrigger:a,children:l,className:c}){const i=r.useRef(null),u=r.useRef(null),s=r.useRef(null),x=r.useCallback(()=>{t(),u.current?.scrollIntoView({behavior:"smooth"})},[t]);r.useEffect(()=>{n?s.current?.scrollIntoView({behavior:"smooth"}):u.current?.scrollIntoView({behavior:"smooth"})},[n]);const{keyboardProps:m}=k({onKeyDown:h=>{(h.key==="Escape"||h.key==="C")&&n&&(h.preventDefault(),t())}});return e.jsxs(e.Fragment,{children:[o?.({isOpen:n}),e.jsxs("div",{ref:i,className:S(C.sheet,c),"data-open":n?"true":"false","aria-hidden":!n,...m,children:[e.jsx("div",{ref:u,className:C.sentinel}),e.jsx("menu",{ref:s,className:C.menu,"aria-label":"Actions",children:l}),e.jsx("menu",{className:C.menu,children:a({isOpen:n,onClose:x})})]})]})}function K(){const[n,t]=r.useState(()=>R());return r.useEffect(()=>{const o=()=>t(R());return visualViewport?visualViewport.addEventListener("resize",o):window.addEventListener("resize",o),()=>{visualViewport?visualViewport.removeEventListener("resize",o):window.removeEventListener("resize",o)}},[]),n}function R(){return{width:window?.visualViewport?.width??window?.innerWidth,height:window?.visualViewport?.height??window?.innerHeight}}function q({children:n,onClose:t,isOpen:o,...a}){const l=r.useRef(null),{keyboardProps:c}=k({onKeyDown:h=>{h.key==="Escape"&&o&&(h.preventDefault(),t())}}),i=K(),[u,s]=r.useState(i.height),x=r.useRef(0);r.useEffect(()=>{clearTimeout(x.current),i.height<u&&i.height<window.innerHeight?x.current=setTimeout(()=>{s(i.height)},500):s(i.height)},[u,i.height]);const m={"--tray-min-height":`${u}px`};return o?O.createPortal(e.jsx("div",{className:C.overlay,children:e.jsx("div",{...c,...a,ref:l,className:S(C.tray,C.isOpen),tabIndex:-1,role:"dialog","aria-modal":"true",style:m,children:e.jsx(T,{contain:!0,restoreFocus:!0,autoFocus:!0,children:n})})}),document.body):null}const B=["dialog","tray","sheet"],E=["cart"],b=[...B,...E];function W(){const[n,t]=v("dialogs",D(b)),o=()=>t(b[0]),a=()=>t(b[1]),l=()=>t(b[2]),c=()=>t(E[0]),i=()=>t(null),[u,s]=v("selection",L(N)),x=r.useCallback(g=>s(w=>{const f=w??[];return f.includes(g)?f:[...f,g]}),[s]),m=r.useCallback(g=>s(w=>(w??[]).filter(f=>f!==g)),[s]),h=r.useCallback(g=>s(w=>{const f=w??[];return f.includes(g)?f.filter(A=>A!==g):[...f,g]}),[s]),d=r.useCallback(()=>s(null),[s]);return{onClose:i,dialogs:n,onOpenSheet:l,onOpenTray:a,onOpenDialog:o,onOpenCart:c,selection:u,toggleSelection:h,addToSelection:x,removeFromSelection:m,clearSelection:d}}function M(n){const[t,o]=v("looseURL",D(n));return{state:t,onClose:()=>o(null),onOpen:c=>o(c)}}function ne(){const{onOpenTray:n,onOpenDialog:t,onOpenSheet:o,dialogs:a,onClose:l}=W(),c=a==="tray",i=a==="dialog",u=a==="sheet",{state:s,onOpen:x,onClose:m}=M(["xoxo"]),h=s==="xoxo";return e.jsxs(e.Fragment,{children:[e.jsxs($.Row,{flexWrap:"wrap",children:[e.jsx(p,{onClick:()=>t(),children:"Dialog open"}),e.jsx(p,{onClick:()=>n(),children:"Tray open"}),e.jsx(p,{onClick:()=>x("xoxo"),children:"Tray open 2"}),e.jsxs(G,{trigger:({isOpen:d})=>e.jsx(p,{type:"button",onClick:()=>o(),"aria-expanded":d,children:"Show action sheet"}),unTrigger:({onClose:d})=>e.jsx(p,{type:"reset",onClick:d,children:"Cancel"}),isOpen:u,onClose:()=>l(),children:[e.jsx(p,{className:"action-sheet-button",onClick:d=>d.preventDefault(),children:"Action 1"}),e.jsx(p,{className:"action-sheet-button",onClick:d=>d.preventDefault(),children:"Action 2"}),e.jsx(p,{className:"action-sheet-button",onClick:d=>d.preventDefault(),children:"Action 3"})]})]}),e.jsx("br",{}),e.jsx(H,{isOpen:i,onClose:()=>l(),children:e.jsxs(y,{component:"div",ratio:"landscape",dangerous:{width:"min(750px,80vw)"},children:[e.jsx(y.Title,{children:"Lorem ipsun dolor"}),e.jsxs(y.Content,{children:[e.jsx(j.Triangle,{}),e.jsx(j.Triangle,{}),e.jsx(j.Square,{}),e.jsx(j.Circle,{})]}),e.jsxs(y.Actions,{children:[e.jsx(p,{onClick:()=>l(),children:"Close"})," "]})]})}),e.jsx(q,{isOpen:c||h,onClose:_(l,m),children:e.jsxs(y,{component:"div",children:[e.jsx(y.Title,{children:"Lorem ipsun dolor"}),e.jsxs(y.Content,{children:[e.jsx(j.Triangle,{}),e.jsx(j.Triangle,{}),e.jsx(j.Square,{}),e.jsx(j.Circle,{}),e.jsx(p,{onClick:_(l,m),children:"On close"})]})]})})]})}export{ne as default};
