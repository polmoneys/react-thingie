import{r as l,j as u,d as U,k as $,F as q,B as W,I as B}from"./index-BaTGmJ_u.js";import{C as V}from"./index-C73qK03L.js";import{S as J}from"./index-HNVIGWnM.js";import{G as K}from"./index-CO5JzjXn.js";function Q(t){const e=["RIGHT","UP_RIGHT","UP","UP_LEFT","LEFT","DOWN_LEFT","DOWN","DOWN_RIGHT"],r=Math.round(t/45)%8;return e[r]}function O(t){const e=Math.round(t.angle),r=Math.max(1,Math.ceil(t.percent*5));return{direction:t.direction,angle:e,strength:r}}const Z="_root_81ln7_1",tt="_overlay_81ln7_11",G={root:Z,overlay:tt};function et({width:t=300,height:e=220,threshold:r=10,showOverlay:h=!0,fadeOutMs:y=300,className:P,onStart:g,onMove:v,onEnd:E,children:T,label:F,circleFill:D="currentColor"}){const p=l.useRef(null),d=l.useRef(null),i=l.useRef(null),m=l.useRef(null),L=l.useRef(!1),[S,_]=l.useState(null),[n,w]=l.useState(null);l.useEffect(()=>()=>{m.current&&cancelAnimationFrame(m.current)},[]);function b(o,c){const a=c.x-o.x,s=c.y-o.y,x=Math.hypot(a,s),k=(Math.atan2(-s,a)*(180/Math.PI)+360)%360,z=Math.hypot(t,e),X=Math.min(1,x/z),Y=Q(k);return{start:o,current:c,dx:a,dy:s,distance:x,angle:k,direction:Y,percent:X}}function A(){m.current=null;const o=d.current,c=i.current;if(!o||!c)return;const a=b(o,c);if(a.distance>=r&&v){const s=O(a);v(s)}h&&w(s=>({visible:!0,x1:o.x,y1:o.y,x2:c.x,y2:c.y,fading:!1})),_(null)}function C(){m.current==null&&(m.current=requestAnimationFrame(A))}const f=o=>{if(o.pointerType==="mouse"&&o.button!==0)return;const c=p.current;if(!c)return;c.setPointerCapture(o.pointerId),L.current=!0;const a=c.getBoundingClientRect(),s={x:o.clientX-a.left,y:o.clientY-a.top};d.current=s,i.current=s,g&&g(s),h&&w({visible:!0,x1:s.x,y1:s.y,x2:s.x,y2:s.y,fading:!1}),o.preventDefault()},R=o=>{if(!L.current)return;const c=p.current;if(!c)return;const a=c.getBoundingClientRect();i.current={x:o.clientX-a.left,y:o.clientY-a.top},C()},I=o=>N(o),j=()=>N();function N(o){if(!L.current)return;L.current=!1,m.current&&(cancelAnimationFrame(m.current),m.current=null);const c=d.current,a=i.current;if(!c||!a)return;const s=b(c,a);if(s.distance>=r&&E){const x=O(s);E({summary:x,details:s})}w({visible:!0,x1:c.x,y1:c.y,x2:a.x,y2:a.y,fading:!1}),_(a),window.setTimeout(()=>{w(x=>x&&{...x,fading:!0}),window.setTimeout(()=>w(null),y)},10);try{const x=p.current;x&&"releasePointerCapture"in x&&o?.pointerId!=null&&x.releasePointerCapture(o.pointerId)}catch{}d.current=null,i.current=null}const M={width:t,height:e};return u.jsxs("div",{ref:p,className:U(G.root,P),style:M,onPointerDown:f,onPointerMove:R,onPointerUp:I,onPointerCancel:j,"aria-label":F,children:[T||null,u.jsxs("svg",{width:"100%",height:"100%",viewBox:`0 0 ${t} ${e}`,className:G.overlay,preserveAspectRatio:"none",children:[S?u.jsx("circle",{cx:S.x,cy:S.y,r:18,fill:D}):null,n?u.jsxs("g",{style:{opacity:n.fading?0:1,transition:`opacity ${y}ms ease-out`},children:[u.jsx("circle",{cx:n.x1,cy:n.y1,r:6,fill:"currentColor",opacity:.15}),u.jsx("line",{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,stroke:"currentColor",strokeWidth:4,strokeLinecap:"round"})]}):null]})]})}const nt=["button","a[href]","input","textarea","select",'[role="button"]'].join(",");function rt(t){const e=["RIGHT","UP_RIGHT","UP","UP_LEFT","LEFT","DOWN_LEFT","DOWN","DOWN_RIGHT"],r=Math.round(t/45)%8;return e[r]}function H(t,e,r,h){const y=e.x-t.x,P=e.y-t.y,g=Math.hypot(y,P),E=(Math.atan2(-P,y)*(180/Math.PI)+360)%360,T=Math.hypot(r,r),F=Math.min(1,g/T),D=Math.max(1,T-h),p=Math.max(0,g-h),d=Math.round(p/D*100),i=rt(E);return{start:t,current:e,dx:y,dy:P,distance:g,angle:E,direction8:i,percent:F,strengthPercent:d}}function ot(t,e){return Math.abs(t)>=Math.abs(e)?t>=0?"RIGHT":"LEFT":e<=0?"UP":"DOWN"}function ct(t){return t<.13?"close":t<.36?"fair":"far"}function st(t,e={}){const{threshold:r=20,lockAxis:h=null,allowedDirections:y=null,preventDefaultOnSwipe:P=!1,ignoreInteractive:g=!0,size:v=null,onSwipe:E}=e,T=l.useRef(null);T.current=E??null;const F=l.useRef(null),D=t??F,p=l.useRef(null),d=l.useRef(null),i=l.useRef(null),m=l.useRef(!1),[L,S]=l.useState(!1);function _(n,w){i.current==null&&(i.current=requestAnimationFrame(()=>{i.current=null;const b=p.current,A=d.current;if(!b||!A)return;const C=H(b,A,n,r);h==="x"&&Math.abs(C.dy)>Math.abs(C.dx)||h==="y"&&Math.abs(C.dx)>Math.abs(C.dy)}))}return l.useEffect(()=>{const n=D.current;if(!n)return;function w(f){if(f.pointerType==="mouse"&&f.button!==0)return;if(g){const j=f.target;if(j&&j.closest&&j.closest(nt))return}try{n.setPointerCapture?.(f.pointerId)}catch{}m.current=!0,S(!0);const R=n.getBoundingClientRect(),I={x:f.clientX-R.left,y:f.clientY-R.top};p.current=I,d.current=I}function b(f){if(!m.current)return;const R=n.getBoundingClientRect();d.current={x:f.clientX-R.left,y:f.clientY-R.top};const I=v??Math.max(R.width||1,R.height||1);_(I)}function A(f){if(!m.current)return;m.current=!1,i.current&&(cancelAnimationFrame(i.current),i.current=null),S(!1);const R=n.getBoundingClientRect(),I=p.current,j=d.current;if(!I||!j)return;const N=v??Math.max(R.width||1,R.height||1),M=H(I,j,N,r);if(h==="x"&&Math.abs(M.dy)>Math.abs(M.dx)){p.current=null,d.current=null;try{n.releasePointerCapture?.(f.pointerId)}catch{}return}if(h==="y"&&Math.abs(M.dx)>Math.abs(M.dy)){p.current=null,d.current=null;try{n.releasePointerCapture?.(f.pointerId)}catch{}return}if(M.distance>=r){const o=ot(M.dx,M.dy),c=ct(M.percent),a={direction4:o,distanceHuman:c};if(!y||y.includes(M.direction8)){const s=T.current;if(typeof s=="function")try{s(a,M)}catch{}if(P)try{f.preventDefault()}catch{}}}try{n.releasePointerCapture?.(f.pointerId)}catch{}p.current=null,d.current=null}function C(){m.current=!1,i.current&&(cancelAnimationFrame(i.current),i.current=null),S(!1),p.current=null,d.current=null}return n.addEventListener("pointerdown",w),n.addEventListener("pointermove",b),n.addEventListener("pointerup",A),n.addEventListener("pointercancel",C),()=>{n.removeEventListener("pointerdown",w),n.removeEventListener("pointermove",b),n.removeEventListener("pointerup",A),n.removeEventListener("pointercancel",C),i.current&&(cancelAnimationFrame(i.current),i.current=null)}},[D,r,h,y,P,g,v]),{ref:D,isSwiping:L}}function it(t){const{touchAction:e,lock:r,threshold:h=16,onEnd:y,children:P,classNames:g}=t,v=l.useRef(null),{ref:E,isSwiping:T}=st(v,{threshold:h,...$(r)&&{lockAxis:r},onSwipe:F=>{y(F)}});return u.jsx("div",{ref:E,style:{touchAction:e},className:U(g?.root,T&&g?.isSwiping),children:P({isSwiping:T})})}function pt(){const[t,e]=l.useState("default");return u.jsxs(u.Fragment,{children:[u.jsx(it,{lock:"x",touchAction:"pan-x",classNames:{root:"theme",isSwiping:"noise-scroll"},onEnd:r=>{if(r.direction4==="LEFT"){e("pin");return}e("delete")},children:({isSwiping:r})=>u.jsx(J,{...!r&&t==="delete"&&{startWidth:"69px",start:u.jsx(W.Negative,{isIcon:!0,onClick:()=>{console.log("Are u sure u wanna delete me ?"),e("default")},children:u.jsx(B.X,{size:28})})},...!r&&t==="pin"&&{endWidth:"69px",end:u.jsx(W.Positive,{isIcon:!0,onClick:()=>{console.log("Are u sure u wanna pin me ?"),e("default")},children:u.jsx(B.Add,{size:28})})},dangerous:{gap:"var(--gap-3)!important"},children:u.jsxs(K,{gap:{xs:"var(--gap-3)"},gridTemplateColumns:{xs:"var(--min-height) 1fr"},dangerous:{alignItems:"center"},children:[u.jsx(V,{}),u.jsx(q.Bold,{clamp:1,children:"Task description "})]})})}),u.jsx("br",{}),u.jsx(et,{className:"theme negative",label:"joystick",onEnd:({summary:{direction:r}})=>{if(r.endsWith("LEFT")){e("pin");return}else{e("delete");return}}})]})}export{pt as default};
