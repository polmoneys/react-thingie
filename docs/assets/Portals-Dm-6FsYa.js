import{r as s,j as e,B as f,b as x}from"./index-CJO-bn05.js";import{r as g}from"./index-BoEnjmSY.js";import{S as b}from"./index-mGelYIOr.js";function v(d){const a=s.createContext(void 0);a.displayName=d;function h({children:l,fallbackPortalId:c="fallback-portal-target"}){const n=s.useRef(null),[o,r]=s.useState(null),t=s.useCallback(()=>{n.current&&typeof document<"u"&&document.body.contains(n.current)&&document.body.removeChild(n.current),n.current=null},[]),P=s.useCallback(p=>{if(typeof document>"u")return;if(p===null){t(),r(null);return}if(p instanceof HTMLElement){t(),r(p);return}const j=document.getElementById(p);if(j){t(),r(j);return}if(!n.current){const i=document.createElement("div");i.id=c,i.setAttribute("data-portal-fallback","true"),i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),document.body.appendChild(i),n.current=i}r(n.current)},[c,t]);s.useEffect(()=>()=>{t()},[t]);const k=s.useMemo(()=>({portalTarget:o,setPortalTarget:P}),[o,P]);return e.jsx(a.Provider,{value:k,children:l})}function m(){const l=s.useContext(a);if(!l)throw new Error(`${a.displayName} hook must be used inside its provider`);return l}function u({children:l,onMount:c,onUnmount:n}){const{portalTarget:o}=m(),r=s.useRef(null);return s.useEffect(()=>(o&&(c?.(o),r.current=o),()=>{const t=r.current;t&&n?.(t),r.current=null}),[o,c,n]),o?g.createPortal(l,o):null}return{PortalProvider:h,usePortal:m,Portal:u}}const C=v("DemoPortal");function A(){const{PortalProvider:d}=C;return e.jsx(d,{children:e.jsx(E,{})})}function E(){const{usePortal:d,Portal:a}=C,[h,m]=s.useState(!1),{setPortalTarget:u}=d(),l=()=>u(null),c=()=>u("whatever"),n=()=>u("aside"),o=()=>{u("aside"),m(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(a,{children:e.jsx(b.Triangle,{size:90})}),h&&e.jsx(a,{children:e.jsx(b.Square,{size:90})}),e.jsx(f.Group,{direction:"vertical",children:({active:r,setActive:t})=>e.jsxs(e.Fragment,{children:[e.jsx(f,{stretch:!0,isActive:r===0,onClick:x(n,()=>t(0)),children:"Set portal on aside element"}),e.jsx(f,{stretch:!0,isActive:r===1,onClick:x(c,()=>t(1)),children:"Fallback if !portalTarget"}),e.jsx(f,{stretch:!0,isActive:r===2,onClick:x(o,()=>t(2)),children:"Set aside and append"}),e.jsx(f,{stretch:!0,isActive:r===3,onClick:x(l,()=>t(3)),children:"Clear portals"})]})}),e.jsx("br",{})]})}export{A as default};
