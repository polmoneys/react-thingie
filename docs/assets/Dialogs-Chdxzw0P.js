import{r,j as e,c as b,$ as D,u as v,p as I,d as O,e as L,B as h,F as S,I as $,b as _}from"./index--sbhOivd.js";import{$ as k}from"./useKeyboard-DSNFmm-f.js";import{$ as T}from"./index-DDUP-wo1.js";import{C as j}from"./index-QETvrInH.js";import{G as N}from"./index-lmLP4mjD.js";import{S as R}from"./index-DH8oYL-T.js";const V="_dialog_985zl_1",F="_overlay_985zl_10",U="_tray_985zl_26",H="_isOpen_985zl_45",P="_sheet_985zl_49",B="_sentinel_985zl_83",y={dialog:V,overlay:F,tray:U,isOpen:H,sheet:P,sentinel:B};function G({onClose:n,children:t,isOpen:o,...l}){const i=r.useRef(null),{keyboardProps:c}=k({onKeyDown:a=>{a.key==="Escape"&&o&&(a.preventDefault(),n())}});return o?T.createPortal(e.jsx("div",{...l,ref:i,className:b(l.className,y.dialog),tabIndex:-1,role:"dialog","aria-modal":"true",...c,children:e.jsx(D,{contain:!0,restoreFocus:!0,autoFocus:!0,children:t})}),document.body):null}function K({isOpen:n,onClose:t,trigger:o,unTrigger:l,children:i,className:c}){const a=r.useRef(null),u=r.useRef(null),s=r.useRef(null),x=r.useCallback(()=>{t(),u.current?.scrollIntoView({behavior:"smooth"})},[t]);r.useEffect(()=>{n?s.current?.scrollIntoView({behavior:"smooth"}):u.current?.scrollIntoView({behavior:"smooth"})},[n]);const{keyboardProps:g}=k({onKeyDown:p=>{(p.key==="Escape"||p.key==="C")&&n&&(p.preventDefault(),t())}});return e.jsxs(e.Fragment,{children:[o?.({isOpen:n}),e.jsxs("div",{ref:a,className:b(y.sheet,c),"data-open":n?"true":"false","aria-hidden":!n,...g,children:[e.jsx("div",{ref:u,className:y.sentinel}),e.jsx("menu",{ref:s,className:y.menu,"aria-label":"Actions",children:i}),e.jsx("menu",{className:y.menu,children:l({isOpen:n,onClose:x})})]})]})}function W(){const[n,t]=r.useState(()=>z());return r.useEffect(()=>{const o=()=>t(z());return visualViewport?visualViewport.addEventListener("resize",o):window.addEventListener("resize",o),()=>{visualViewport?visualViewport.removeEventListener("resize",o):window.removeEventListener("resize",o)}},[]),n}function z(){return{width:window?.visualViewport?.width??window?.innerWidth,height:window?.visualViewport?.height??window?.innerHeight}}function Y({children:n,onClose:t,isOpen:o,...l}){const i=r.useRef(null),{keyboardProps:c}=k({onKeyDown:p=>{p.key==="Escape"&&o&&(p.preventDefault(),t())}}),a=W(),[u,s]=r.useState(a.height),x=r.useRef(0);r.useEffect(()=>{clearTimeout(x.current),a.height<u&&a.height<window.innerHeight?x.current=setTimeout(()=>{s(a.height)},500):s(a.height)},[u,a.height]);const g={"--tray-min-height":`${u}px`};return o?T.createPortal(e.jsx("div",{className:y.overlay,children:e.jsx("div",{...c,...l,ref:i,className:b(y.tray,y.isOpen),tabIndex:-1,role:"dialog","aria-modal":"true",style:g,children:e.jsx(D,{contain:!0,restoreFocus:!0,autoFocus:!0,children:n})})}),document.body):null}const q=["dialog","tray","sheet"],A=["cart"],w=[...q,...A];function M(){const[n,t]=v("dialogs",I(w)),o=()=>t(w[0]),l=()=>t(w[1]),i=()=>t(w[2]),c=()=>t(A[0]),a=()=>t(null),[u,s]=v("selection",O(L)),x=r.useCallback(m=>s(C=>{const f=C??[];return f.includes(m)?f:[...f,m]}),[s]),g=r.useCallback(m=>s(C=>(C??[]).filter(f=>f!==m)),[s]),p=r.useCallback(m=>s(C=>{const f=C??[];return f.includes(m)?f.filter(E=>E!==m):[...f,m]}),[s]),d=r.useCallback(()=>s(null),[s]);return{onClose:a,dialogs:n,onOpenSheet:i,onOpenTray:l,onOpenDialog:o,onOpenCart:c,selection:u,toggleSelection:p,addToSelection:x,removeFromSelection:g,clearSelection:d}}function Q(n){const[t,o]=v("looseURL",I(n));return{state:t,onClose:()=>o(null),onOpen:c=>o(c)}}function oe(){const{onOpenTray:n,onOpenDialog:t,onOpenSheet:o,dialogs:l,onClose:i}=M(),c=l==="tray",a=l==="dialog",u=l==="sheet",{state:s,onOpen:x,onClose:g}=Q(["xoxo"]),p=s==="xoxo";return e.jsxs(e.Fragment,{children:[e.jsxs(N.Row,{flexWrap:"wrap",children:[e.jsx(h,{onClick:()=>t(),children:"Dialog open"}),e.jsx(h,{onClick:()=>n(),children:"Tray open"}),e.jsx(h,{onClick:()=>x("xoxo"),children:"Tray open 2"}),e.jsxs(K,{trigger:({isOpen:d})=>e.jsx(h,{type:"button",onClick:()=>o(),"aria-expanded":d,children:"Show action sheet"}),unTrigger:({onClose:d})=>e.jsx(h,{type:"reset",onClick:d,children:"Cancel"}),isOpen:u,onClose:()=>i(),children:[e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 1"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 2"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 3"})]})]}),e.jsx("br",{}),e.jsx(G,{isOpen:a,onClose:()=>i(),children:e.jsxs(j,{component:"div",ratio:"landscape",dangerous:{width:"min(750px,80vw)"},children:[e.jsxs(j.Title,{dangerous:{display:"flex",alignItems:"center",borderBottom:"var(--border)",minHeight:"var(--hit-area-height)",padding:"0 var(--gap-2) 0 var(--gap-3)"},children:[e.jsx(S,{children:"Lorem ipsun dolor"}),e.jsx(h.Icon,{className:"ml-a",onClick:()=>i(),isText:!0,children:e.jsx($.X,{size:36,circle:!1})})]}),e.jsx(j.Content,{dangerous:{textAlign:"center"},children:e.jsx(R.Triangle,{size:250,transforms:"translateY(36px)"})}),e.jsx(j.Actions,{dangerous:{display:"flex",alignItems:"center",borderTop:"var(--border)",height:"var(--hit-area-height)",justifyContent:"flex-end"},children:e.jsx(h,{onClick:()=>i(),children:"Close"})})]})}),e.jsx(Y,{isOpen:c||p,onClose:_(i,g),children:e.jsxs(j,{component:"div",dangerous:{width:"min(750px,80vw)"},children:[e.jsx(j.Title,{dangerous:{display:"flex",placeContent:"center",borderBottom:"var(--border)",height:"var(--hit-area-height)"},children:e.jsx(S,{children:"Lorem ipsun dolor"})}),e.jsx(j.Content,{dangerous:{textAlign:"center"},children:e.jsx(R.Square,{size:350,transforms:"translateY(22px)"})}),e.jsx(j.Actions,{className:"mt-a",dangerous:{display:"flex",alignItems:"center"},children:e.jsx(h,{stretch:!0,onClick:_(i,g),children:"Close"})})]})})]})}export{oe as default};
