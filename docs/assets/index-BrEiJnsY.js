import{r as n,j as E}from"./index-DfR4J3qm.js";function f(a,u){return typeof a=="string"||typeof a=="number"||typeof a=="symbol"?a:u(a)}function N(a){const u=n.createContext(void 0);u.displayName=a??"ThingWithSelection";function m({items:r,keySelector:t,initialSelectedKeys:w=[],children:T}){const[c,d]=n.useState(()=>new Set(w)),l=n.useCallback(s=>c.has(f(s,t)),[c,t]),x=n.useCallback(s=>{const o=f(s,t);d(i=>{const e=new Set(i);return e.has(o)?e.delete(o):e.add(o),e})},[t]),h=n.useCallback(s=>{const o=f(s,t);d(i=>{if(i.has(o))return i;const e=new Set(i);return e.add(o),e})},[t]),C=n.useCallback(s=>{const o=f(s,t);d(i=>{if(!i.has(o))return i;const e=new Set(i);return e.delete(o),e})},[t]),b=n.useCallback(()=>d(new Set),[]),g=n.useCallback(()=>r.filter(s=>c.has(t(s))),[r,t,c]),j=n.useMemo(()=>({items:r,keyOf:t,selectedKeys:c,selectedCount:c.size,isSelected:l,toggle:x,add:h,remove:C,clear:b,exportSelected:g}),[r,t,c,l,x,h,C,b,g]);return E.jsx(u.Provider,{value:j,children:T})}function p(){const r=n.useContext(u);if(!r)throw new Error(`${u.displayName} hook must be used inside its <Thingie> provider`);return r}return{Thingie:m,useSelection:p}}export{N as c};
