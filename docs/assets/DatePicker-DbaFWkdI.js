const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Range-Cua3QrSh.js","assets/index-5usdHAzP.js","assets/index-DCsH5Mf8.css","assets/index-DAISTjvQ.js","assets/index-B-IqOxyj.css","assets/index-C4IZMPVY.js","assets/useKeyboard-DSNFmm-f.js"])))=>i.map(i=>d[i]);
import{j as n,B as w,r as l,F as Y,I as G,_ as y}from"./index-5usdHAzP.js";import{d as C}from"./dayjs.min-B3mVIIL3.js";import{C as F}from"./index-CL5Q7k7C.js";import{G as B}from"./GridTemplateColumns-CWcQMdKb.js";import{G as k}from"./index-DAISTjvQ.js";import"./index.module-B8tlVfxN.js";function N(s,e,c=!1){const u=s.length,d=[];for(const f of e){const[b,m]=f;if(!Number.isInteger(b)||!Number.isInteger(m)){d.push([]);continue}let i=b,p=m;if(c&&(i<0&&(i=u+i),p<0&&(p=u+p)),i=Math.max(0,i),p=Math.min(u-1,p),i>p){d.push([]);continue}d.push(s.slice(i,p+1))}return d.filter(f=>f.length>0)}function V({periods:s,availablePeriods:e,selectedPeriod:c,setPeriod:u}){return N(s,[[0,4],[5,10],[11,13]]).map((f,b)=>n.jsx(w.Group,{children:()=>n.jsx(n.Fragment,{children:f.map(m=>n.jsx(w,{onClick:()=>u(m.id),disabled:!e[m.id],isActive:c===m.id,children:m.label},m.id))})},`group-${b}`))}const L=s=>s?C(s):C(),I=s=>s.format("YYYY-MM-DD");function M(s){let e=s.endOf("month");for(;e.day()===0||e.day()===6;)e=e.subtract(1,"day");return e}function t(s){return C(s.format("YYYY-MM-DD"))}function P(s,e,c){switch(s){case"oneDay":return{start:t(e.subtract(1,"day")),end:t(e)};case"oneWeek":return{start:t(e.subtract(1,"week")),end:t(e)};case"oneMonths":return{start:t(e.subtract(1,"month")),end:t(e)};case"threeMonths":return{start:t(e.subtract(3,"month")),end:t(e)};case"sixMonths":return{start:t(e.subtract(6,"month")),end:t(e)};case"YTD":return{start:t(e.startOf("year")),end:t(e)};case"oneYears":return{start:t(e.subtract(1,"year")),end:t(e)};case"threeYears":return{start:t(e.subtract(3,"year")),end:t(e)};case"fiveYears":return{start:t(e.subtract(5,"year")),end:t(e)};case"sevenYears":return{start:t(e.subtract(7,"year")),end:t(e)};case"tenYears":return{start:t(e.subtract(10,"year")),end:t(e)};case"inception":return{start:c??t(e),end:t(e)};case"custom":return{start:t(e),end:t(e)};default:return{start:t(e),end:t(e)}}}function U(s,e,c){if(s==="custom")return!0;if(s==="inception")return!!c;const{start:u}=P(s,e,c);return c?!c.isAfter(u,"day"):!1}function z(s){const{inceptionDates:e,today:c,defaultPeriod:u="oneMonths",defaultEndOfMonth:d=!1,onInvalid:f,onAfter:b,onInvalidPeriod:m}=s,i=l.useMemo(()=>L(c),[c]),p=(e||[]).join("|"),h=l.useMemo(()=>{if(!e||e.length===0)return null;const r=e.map(a=>C(a)).filter(a=>a.isValid()).sort((a,o)=>a.valueOf()-o.valueOf());return r.length?t(r[0]):null},[p]),[g,E]=l.useState(u),[x,S]=l.useState(d),[T,D]=l.useState(()=>P(u,i,h).start),[W,v]=l.useState(()=>P(u,i,h).end),O=l.useMemo(()=>["oneDay","oneWeek","oneMonths","threeMonths","sixMonths","YTD","oneYears","threeYears","fiveYears","sevenYears","tenYears","inception","custom"].reduce((o,j)=>(o[j]=U(j,i,h),o),{}),[i,h]);l.useEffect(()=>{if(g==="custom")return;const{start:r,end:a}=P(g,i,h);D(r),v(a)},[g,i,h]),l.useEffect(()=>{x&&(D(r=>M(r)),v(r=>M(r)))},[x]),l.useEffect(()=>{if(!O[g]){const a=["oneDay","oneWeek","oneMonths","threeMonths","sixMonths","YTD","oneYears","threeYears","fiveYears","sevenYears","tenYears","inception","custom"].find(o=>O[o]);E(a??"custom")}},[O]);function _(r){if(r!=="custom"&&!O[r]){m?.();return}if(E(r),r==="custom")return;const{start:a,end:o}=P(r,i,h);x?(D(M(a)),v(M(o))):(D(a),v(o))}function R(r,a){const o=t(C(r)),j=t(C(a));if(!o.isValid()||!j.isValid()){f?.();return}if(o.isAfter(j)){b?.();return}E("custom"),x?(D(M(o)),v(M(j))):(D(o),v(j))}function A(r){const a=typeof r=="boolean"?r:!x;S(a),a&&(D(o=>M(o)),v(o=>M(o)))}return{oldestInceptionDate:h?I(h):null,availablePeriods:O,selectedPeriod:g,startDate:I(T),endDate:I(W),endOfMonth:x,setPeriod:_,setCustomRange:R,toggleEndOfMonth:A,showUI:g==="custom"&&h!==null}}const K=l.lazy(()=>y(()=>import("./Range-Cua3QrSh.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),$=[{id:"oneDay",label:"1D"},{id:"oneWeek",label:"1W"},{id:"oneMonths",label:"1M"},{id:"threeMonths",label:"3M"},{id:"sixMonths",label:"6M"},{id:"YTD",label:"YTD"},{id:"oneYears",label:"1Y"},{id:"threeYears",label:"3Y"},{id:"fiveYears",label:"5Y"},{id:"sevenYears",label:"7Y"},{id:"tenYears",label:"10Y"},{id:"inception",label:"Inception"},{id:"custom",label:"Custom"}];function ee({inceptionDates:s=["2020-03-15","2021-06-01"]}){const{oldestInceptionDate:e,availablePeriods:c,selectedPeriod:u,startDate:d,endDate:f,endOfMonth:b,setPeriod:m,setCustomRange:i,toggleEndOfMonth:p,showUI:h}=z({inceptionDates:s,defaultPeriod:"oneMonths",defaultEndOfMonth:!1}),[g,E]=l.useState(d),[x,S]=l.useState(f);return l.useEffect(()=>{E(d),S(f)},[d,f]),n.jsxs(k,{flexDirection:"column",gap:"var(--gap-3)",children:[n.jsx(V,{periods:$,availablePeriods:c,setPeriod:m,selectedPeriod:u}),n.jsxs(B,{gridTemplateColumns:{xs:"1fr 44px"},dangerous:{maxWidth:"320px",placeContent:"start",alignItems:"center"},children:[n.jsxs(Y,{children:["Last working day"," ",n.jsx(Y.Bold,{component:"span",children:"(EOM)"})]}),n.jsx(F,{checked:b,onChange:T=>p(T.target.checked)})]}),n.jsxs(B,{gridTemplateColumns:{xs:"1fr 1fr"},className:"positive",gap:{xs:"var(--gap-2)"},dangerous:{border:"var(--border)",padding:"var(--gap-2)",maxWidth:"min(600px,80vw)"},children:[n.jsxs(k,{variant:"grid",gridTemplateColumns:"120px 1fr",children:[n.jsx(Y,{children:"Start "}),n.jsxs(Y.Bold,{component:"strong",children:[" ",d]})]}),n.jsxs(k,{variant:"grid",gridTemplateColumns:"120px 1fr",children:[n.jsx(Y,{children:"End "}),n.jsxs(Y.Bold,{component:"strong",children:[" ",f]})]})]}),n.jsxs(k,{variant:"grid",gridTemplateColumns:"130px 1fr",className:"negative",dangerous:{border:"var(--border)",padding:"var(--gap-2)",width:"fit-content"},children:[n.jsx(Y,{children:"Oldest date "}),n.jsx(Y.Bold,{component:"strong",children:e??"â€”"})]}),h&&n.jsx(l.Suspense,{fallback:n.jsx(G.Loading,{}),children:n.jsx(K,{oldestInceptionDate:e,start:g,end:x,setStart:E,setEnd:S,children:n.jsx(w,{onClick:()=>i(g,x),children:"Apply"})})})]})}export{ee as default};
