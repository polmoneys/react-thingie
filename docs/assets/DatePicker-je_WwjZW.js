const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Range-Cvzfk216.js","assets/index-DfR4J3qm.js","assets/index-DHOrJqBx.css","assets/useHover-BJKg7TaP.js","assets/index-DA2yu6bt.js","assets/index-DNa_C3-g.css","assets/Dialog-Cv4EVVYc.js"])))=>i.map(i=>d[i]);
import{j as n,B as w,r as l,G as k,F as Y,I as F,_ as G}from"./index-DfR4J3qm.js";import{C as y}from"./index-6tMOwEWu.js";import{G as B}from"./index-DA2yu6bt.js";import{d as C}from"./dayjs.min-0hWVvPUY.js";function N(s,e,c=!1){const u=s.length,d=[];for(const f of e){const[b,h]=f;if(!Number.isInteger(b)||!Number.isInteger(h)){d.push([]);continue}let i=b,p=h;if(c&&(i<0&&(i=u+i),p<0&&(p=u+p)),i=Math.max(0,i),p=Math.min(u-1,p),i>p){d.push([]);continue}d.push(s.slice(i,p+1))}return d.filter(f=>f.length>0)}function V({periods:s,availablePeriods:e,selectedPeriod:c,setPeriod:u}){return N(s,[[0,4],[5,10],[11,13]]).map((f,b)=>n.jsx(w.Group,{children:()=>n.jsx(n.Fragment,{children:f.map(h=>n.jsx(w,{onClick:()=>u(h.id),disabled:!e[h.id],isActive:c===h.id,children:h.label},h.id))})},`group-${b}`))}const L=s=>s?C(s):C(),I=s=>s.format("YYYY-MM-DD");function M(s){let e=s.endOf("month");for(;e.day()===0||e.day()===6;)e=e.subtract(1,"day");return e}function t(s){return C(s.format("YYYY-MM-DD"))}function P(s,e,c){switch(s){case"oneDay":return{start:t(e.subtract(1,"day")),end:t(e)};case"oneWeek":return{start:t(e.subtract(1,"week")),end:t(e)};case"oneMonths":return{start:t(e.subtract(1,"month")),end:t(e)};case"threeMonths":return{start:t(e.subtract(3,"month")),end:t(e)};case"sixMonths":return{start:t(e.subtract(6,"month")),end:t(e)};case"YTD":return{start:t(e.startOf("year")),end:t(e)};case"oneYears":return{start:t(e.subtract(1,"year")),end:t(e)};case"threeYears":return{start:t(e.subtract(3,"year")),end:t(e)};case"fiveYears":return{start:t(e.subtract(5,"year")),end:t(e)};case"sevenYears":return{start:t(e.subtract(7,"year")),end:t(e)};case"tenYears":return{start:t(e.subtract(10,"year")),end:t(e)};case"inception":return{start:c??t(e),end:t(e)};case"custom":return{start:t(e),end:t(e)};default:return{start:t(e),end:t(e)}}}function U(s,e,c){if(s==="custom")return!0;if(s==="inception")return!!c;const{start:u}=P(s,e,c);return c?!c.isAfter(u,"day"):!1}function z(s){const{inceptionDates:e,today:c,defaultPeriod:u="oneMonths",defaultEndOfMonth:d=!1,onInvalid:f,onAfter:b,onInvalidPeriod:h}=s,i=l.useMemo(()=>L(c),[c]),p=(e||[]).join("|"),m=l.useMemo(()=>{if(!e||e.length===0)return null;const r=e.map(a=>C(a)).filter(a=>a.isValid()).sort((a,o)=>a.valueOf()-o.valueOf());return r.length?t(r[0]):null},[p]),[g,E]=l.useState(u),[x,S]=l.useState(d),[T,D]=l.useState(()=>P(u,i,m).start),[W,j]=l.useState(()=>P(u,i,m).end),O=l.useMemo(()=>["oneDay","oneWeek","oneMonths","threeMonths","sixMonths","YTD","oneYears","threeYears","fiveYears","sevenYears","tenYears","inception","custom"].reduce((o,v)=>(o[v]=U(v,i,m),o),{}),[i,m]);l.useEffect(()=>{if(g==="custom")return;const{start:r,end:a}=P(g,i,m);D(r),j(a)},[g,i,m]),l.useEffect(()=>{x&&(D(r=>M(r)),j(r=>M(r)))},[x]),l.useEffect(()=>{if(!O[g]){const a=["oneDay","oneWeek","oneMonths","threeMonths","sixMonths","YTD","oneYears","threeYears","fiveYears","sevenYears","tenYears","inception","custom"].find(o=>O[o]);E(a??"custom")}},[O]);function _(r){if(r!=="custom"&&!O[r]){h?.();return}if(E(r),r==="custom")return;const{start:a,end:o}=P(r,i,m);x?(D(M(a)),j(M(o))):(D(a),j(o))}function R(r,a){const o=t(C(r)),v=t(C(a));if(!o.isValid()||!v.isValid()){f?.();return}if(o.isAfter(v)){b?.();return}E("custom"),x?(D(M(o)),j(M(v))):(D(o),j(v))}function A(r){const a=typeof r=="boolean"?r:!x;S(a),a&&(D(o=>M(o)),j(o=>M(o)))}return{oldestInceptionDate:m?I(m):null,availablePeriods:O,selectedPeriod:g,startDate:I(T),endDate:I(W),endOfMonth:x,setPeriod:_,setCustomRange:R,toggleEndOfMonth:A,showUI:g==="custom"&&m!==null}}const K=l.lazy(()=>G(()=>import("./Range-Cvzfk216.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),$=[{id:"oneDay",label:"1D"},{id:"oneWeek",label:"1W"},{id:"oneMonths",label:"1M"},{id:"threeMonths",label:"3M"},{id:"sixMonths",label:"6M"},{id:"YTD",label:"YTD"},{id:"oneYears",label:"1Y"},{id:"threeYears",label:"3Y"},{id:"fiveYears",label:"5Y"},{id:"sevenYears",label:"7Y"},{id:"tenYears",label:"10Y"},{id:"inception",label:"Inception"},{id:"custom",label:"Custom"}];function X({inceptionDates:s=["2020-03-15","2021-06-01"]}){const{oldestInceptionDate:e,availablePeriods:c,selectedPeriod:u,startDate:d,endDate:f,endOfMonth:b,setPeriod:h,setCustomRange:i,toggleEndOfMonth:p,showUI:m}=z({inceptionDates:s,defaultPeriod:"oneMonths",defaultEndOfMonth:!1}),[g,E]=l.useState(d),[x,S]=l.useState(f);return l.useEffect(()=>{E(d),S(f)},[d,f]),n.jsxs(n.Fragment,{children:[n.jsxs(k,{flexDirection:"column",gap:"var(--gap-3)",children:[n.jsx(V,{periods:$,availablePeriods:c,setPeriod:h,selectedPeriod:u}),n.jsxs(B,{gridTemplateColumns:{xs:"1fr 44px"},dangerous:{maxWidth:"320px",placeContent:"start",alignItems:"center"},children:[n.jsxs(Y,{children:["Last working day"," ",n.jsx(Y.Bold,{component:"span",children:"(EOM)"})]}),n.jsx(y,{checked:b,onChange:T=>p(T.target.checked)})]}),n.jsxs(B,{gridTemplateColumns:{xs:"1fr ",sm:"1fr 1fr"},className:"positive",gap:{xs:"var(--gap-2)"},dangerous:{border:"var(--border)",padding:"var(--gap-2)",maxWidth:"min(600px,80vw)"},children:[n.jsxs(k,{variant:"grid",gridTemplateColumns:"120px 1fr",children:[n.jsx(Y,{children:"Start "}),n.jsxs(Y.Bold,{component:"strong",children:[" ",d]})]}),n.jsxs(k,{variant:"grid",gridTemplateColumns:"120px 1fr",children:[n.jsx(Y,{children:"End "}),n.jsxs(Y.Bold,{component:"strong",children:[" ",f]})]})]}),n.jsxs(k,{variant:"grid",gridTemplateColumns:"130px 1fr",className:"negative",dangerous:{border:"var(--border)",padding:"var(--gap-2)",width:"fit-content"},children:[n.jsx(Y,{children:"Oldest date "}),n.jsx(Y.Bold,{component:"strong",children:e??"â€”"})]}),m&&n.jsx(l.Suspense,{fallback:n.jsx(F.Loading,{}),children:n.jsx(K,{oldestInceptionDate:e,start:g,end:x,setStart:E,setEnd:S,children:n.jsx(w,{onClick:()=>i(g,x),children:"Apply"})})})]}),n.jsx("br",{})]})}export{X as default};
