import{r as a,j as s,s as f,c as $,T as F,$ as H,C as K,I as O,B as P}from"./index--sbhOivd.js";function T({selected:o,onRemove:l,getItemLabel:r,limit:c=3}){const[n,h]=a.useState(!1),u=()=>h(i=>!i);return!o||o.length===0?null:s.jsx(H,{contain:!0,children:s.jsxs("div",{className:f.chips,children:[o.slice(0,c??o.length).map((i,S)=>s.jsx(K,{className:f.chip,onClick:w=>{w.stopPropagation(),l(S)},end:s.jsx(O.X,{circle:!1,size:24}),children:r(i)},i.id)),o.length>c&&s.jsx(P,{onClick:u,children:n?"Hide":`+ ${o.length-c}`})]})})}function V({show:o,items:l,onSelect:r,highlightIndex:c,getItemLabel:n,limit:h}){return!o||l.length===0?null:s.jsx("div",{className:f.results,role:"listbox",children:l.slice(0,h??l.length).map((u,i)=>s.jsx("div",{role:"option","aria-selected":i===c,className:$(f.suggestion,i===c&&f.highlighted),onMouseDown:()=>r(u),children:n(u)},u.id))})}function z(o){const{options:l,limit:r=2,id:c="autocomplete-",value:n=[],onChange:h,getItemLabel:u,match:i,initialInput:S="",inputProps:w={}}=o,[C,I]=a.useState(S??""),[d,b]=a.useState([]),[j,p]=a.useState(-1),[L,g]=a.useState(!1),m=a.useRef(null),y=a.useRef(null),k=a.useCallback(e=>u(e),[u]),D=a.useCallback((e,t)=>i?i(e,t):k(e).toLowerCase().includes(t.toLowerCase()),[k,i]),M=e=>{b(e),p(e.length>0?0:-1),g(e.length>0)},v=e=>{if(I(e),e.trim()===""){g(!1),b([]),p(-1);return}const t=l.filter(x=>D(x,e)&&!n.some(E=>E.id===x.id));M(t)},N=e=>{if(e){if(n.some(t=>t.id===e.id)){I(""),g(!1),m.current?.focus();return}h([...n,e]),I(""),g(!1),b([]),p(-1),m.current?.focus()}},R=e=>{const t=n.filter((x,E)=>E!==e);h(t),m.current?.focus()},A=e=>{if(L){if(e.key==="ArrowDown"){e.preventDefault(),p(t=>t<d.length-1?t+1:t);return}if(e.key==="ArrowUp"){e.preventDefault(),p(t=>t>0?t-1:0);return}if(e.key==="Enter"||e.key==="Tab"){j>=0&&d[j]&&(e.preventDefault(),N(d[j]));return}if(e.key==="Escape"){g(!1);return}}e.key==="Backspace"&&C===""&&n.length>0&&(e.preventDefault(),R(n.length-1))},B=e=>N(e);return a.useEffect(()=>{const e=t=>{y.current&&(y.current.contains(t.target)||g(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),a.useEffect(()=>{if(C.trim()==="")return;const e=l.filter(t=>D(t,C)&&!n.some(x=>x.id===t.id));b(e),p(e.length>0?0:-1),g(e.length>0)},[l,n,C,D]),s.jsxs("div",{className:f.autocompLite,children:[s.jsxs("div",{ref:y,className:$(f.container,n.length===0&&f.empty),onClick:()=>m.current?.focus(),children:[s.jsx(T,{selected:n,onRemove:R,getItemLabel:k,limit:r}),s.jsx(F,{id:c,label:"",ref:m,onChange:()=>({}),onChangeNative:e=>v(e.target.value),...w,onKeyDown:A,placeholder:n.length===0?"Search":`${n.length} selected `,"aria-autocomplete":"list","aria-expanded":L,"aria-haspopup":"listbox"})]}),s.jsx(V,{show:L&&d.length>0,items:d,onSelect:B,highlightIndex:j,getItemLabel:k,limit:r})]})}const U=[{id:"ca",name:"California"},{id:"ny",name:"New York"},{id:"al",name:"Alaska"},{id:"mi",name:"Missouri"}];function X(){const[o,l]=a.useState([]);return s.jsxs(s.Fragment,{children:[s.jsx(z,{options:U,value:o,onChange:l,limit:3,getItemLabel:r=>r.name,match:(r,c)=>r.name.toLowerCase().startsWith(c.toLowerCase())}),s.jsx("br",{})]})}export{X as default};
