import{r,$ as b,i as D,j as e,c as k,k as I,l as v,p as T,m as E,n as L,G as N,B as h,F as S,I as V,b as _}from"./index-DNZ0r9ns.js";import{C as j}from"./index-BL-9SGWZ.js";import{S as R}from"./index-B6j2GZgO.js";const F="_dialog_985zl_1",$="_overlay_985zl_10",U="_tray_985zl_26",H="_isOpen_985zl_45",P="_sheet_985zl_49",B="_sentinel_985zl_83",y={dialog:F,overlay:$,tray:U,isOpen:H,sheet:P,sentinel:B};function G({onClose:n,children:t,isOpen:s,...a}){const i=r.useRef(null),{keyboardProps:c}=b({onKeyDown:l=>{l.key==="Escape"&&s&&(l.preventDefault(),n())}});return s?D.createPortal(e.jsx("div",{...a,ref:i,className:k(a.className,y.dialog),tabIndex:-1,role:"dialog","aria-modal":"true",...c,children:e.jsx(I,{contain:!0,restoreFocus:!0,autoFocus:!0,children:t})}),document.body):null}function K({isOpen:n,onClose:t,trigger:s,unTrigger:a,children:i,className:c}){const l=r.useRef(null),u=r.useRef(null),o=r.useRef(null),x=r.useCallback(()=>{t(),u.current?.scrollIntoView({behavior:"smooth"})},[t]);r.useEffect(()=>{n?o.current?.scrollIntoView({behavior:"smooth"}):u.current?.scrollIntoView({behavior:"smooth"})},[n]);const{keyboardProps:g}=b({onKeyDown:p=>{(p.key==="Escape"||p.key==="C")&&n&&(p.preventDefault(),t())}});return e.jsxs(e.Fragment,{children:[s?.({isOpen:n}),e.jsxs("div",{ref:l,className:k(y.sheet,c),"data-open":n?"true":"false","aria-hidden":!n,...g,children:[e.jsx("div",{ref:u,className:y.sentinel}),e.jsx("menu",{ref:o,className:y.menu,"aria-label":"Actions",children:i}),e.jsx("menu",{className:y.menu,children:a({isOpen:n,onClose:x})})]})]})}function M(){const[n,t]=r.useState(()=>z());return r.useEffect(()=>{const s=()=>t(z());return visualViewport?visualViewport.addEventListener("resize",s):window.addEventListener("resize",s),()=>{visualViewport?visualViewport.removeEventListener("resize",s):window.removeEventListener("resize",s)}},[]),n}function z(){return{width:window?.visualViewport?.width??window?.innerWidth,height:window?.visualViewport?.height??window?.innerHeight}}function W({children:n,onClose:t,isOpen:s,...a}){const i=r.useRef(null),{keyboardProps:c}=b({onKeyDown:p=>{p.key==="Escape"&&s&&(p.preventDefault(),t())}}),l=M(),[u,o]=r.useState(l.height),x=r.useRef(0);r.useEffect(()=>{clearTimeout(x.current),l.height<u&&l.height<window.innerHeight?x.current=setTimeout(()=>{o(l.height)},500):o(l.height)},[u,l.height]);const g={"--tray-min-height":`${u}px`};return s?D.createPortal(e.jsx("div",{className:y.overlay,children:e.jsx("div",{...c,...a,ref:i,className:k(y.tray,y.isOpen),tabIndex:-1,role:"dialog","aria-modal":"true",style:g,children:e.jsx(I,{contain:!0,restoreFocus:!0,autoFocus:!0,children:n})})}),document.body):null}const Y=["dialog","tray","sheet"],A=["cart"],w=[...Y,...A];function q(){const[n,t]=v("dialogs",T(w)),s=()=>t(w[0]),a=()=>t(w[1]),i=()=>t(w[2]),c=()=>t(A[0]),l=()=>t(null),[u,o]=v("selection",E(L)),x=r.useCallback(m=>o(C=>{const f=C??[];return f.includes(m)?f:[...f,m]}),[o]),g=r.useCallback(m=>o(C=>(C??[]).filter(f=>f!==m)),[o]),p=r.useCallback(m=>o(C=>{const f=C??[];return f.includes(m)?f.filter(O=>O!==m):[...f,m]}),[o]),d=r.useCallback(()=>o(null),[o]);return{onClose:l,dialogs:n,onOpenSheet:i,onOpenTray:a,onOpenDialog:s,onOpenCart:c,selection:u,toggleSelection:p,addToSelection:x,removeFromSelection:g,clearSelection:d}}function Q(n){const[t,s]=v("looseURL",T(n));return{state:t,onClose:()=>s(null),onOpen:c=>s(c)}}function ee(){const{onOpenTray:n,onOpenDialog:t,onOpenSheet:s,dialogs:a,onClose:i}=q(),c=a==="tray",l=a==="dialog",u=a==="sheet",{state:o,onOpen:x,onClose:g}=Q(["xoxo"]),p=o==="xoxo";return e.jsxs(e.Fragment,{children:[e.jsxs(N.Row,{flexWrap:"wrap",children:[e.jsx(h,{onClick:()=>t(),children:"Dialog open"}),e.jsx(h,{onClick:()=>n(),children:"Tray open"}),e.jsx(h,{onClick:()=>x("xoxo"),children:"Tray open 2"}),e.jsxs(K,{trigger:({isOpen:d})=>e.jsx(h,{type:"button",onClick:()=>s(),"aria-expanded":d,children:"Show action sheet"}),unTrigger:({onClose:d})=>e.jsx(h,{type:"reset",onClick:d,children:"Cancel"}),isOpen:u,onClose:()=>i(),children:[e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 1"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 2"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 3"})]})]}),e.jsx("br",{}),e.jsx(G,{isOpen:l,onClose:()=>i(),children:e.jsxs(j,{component:"div",ratio:"landscape",dangerous:{width:"min(750px,80vw)"},children:[e.jsxs(j.Title,{dangerous:{display:"flex",alignItems:"center",borderBottom:"var(--border)",minHeight:"var(--min-height)",padding:"0 var(--gap-2) 0 var(--gap-3)"},children:[e.jsx(S,{children:"Lorem ipsun dolor"}),e.jsx(h.Icon,{className:"ml-a",onClick:()=>i(),isText:!0,children:e.jsx(V.X,{size:36,circle:!1})})]}),e.jsx(j.Content,{dangerous:{textAlign:"center"},children:e.jsx(R.Triangle,{size:250,transforms:"translateY(36px)"})}),e.jsx(j.Actions,{dangerous:{display:"flex",alignItems:"center",borderTop:"var(--border)",height:"var(--min-height)",justifyContent:"flex-end"},children:e.jsx(h,{onClick:()=>i(),children:"Close"})})]})}),e.jsx(W,{isOpen:c||p,onClose:_(i,g),children:e.jsxs(j,{component:"div",dangerous:{width:"min(750px,80vw)"},children:[e.jsx(j.Title,{dangerous:{display:"flex",placeContent:"center",borderBottom:"var(--border)",height:"var(--min-height)"},children:e.jsx(S,{children:"Lorem ipsun dolor"})}),e.jsx(j.Content,{dangerous:{textAlign:"center"},children:e.jsx(R.Square,{size:350,transforms:"translateY(22px)"})}),e.jsx(j.Actions,{className:"mt-a",dangerous:{display:"flex",alignItems:"center"},children:e.jsx(h,{stretch:!0,onClick:_(i,g),children:"Close"})})]})})]})}export{ee as default};
