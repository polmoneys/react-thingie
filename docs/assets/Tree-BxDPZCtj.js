import{j as t,c as j,B as y,I as h,F as f,r as n,A as S}from"./index--sbhOivd.js";import{G as _}from"./GridTemplateColumns-i5dD8gwh.js";import{G as v}from"./index-lmLP4mjD.js";import{S as x}from"./index-DH8oYL-T.js";import"./index.module-B8tlVfxN.js";const C="_ul_7oktr_1",k="_li_7oktr_9",w="_row_7oktr_10",E="_disabled_7oktr_18",o={ul:C,li:k,row:w,disabled:E},F=22,m=({type:s})=>s==="folder"?t.jsx(x.Square,{size:20}):t.jsx(x,{sides:5,size:20});function I(s){const{node:e,depth:d=0,setSelectedId:i,toggleExpand:r,expanded:l}=s,c=e.type==="folder";return t.jsxs("li",{className:o.li,children:[t.jsxs("div",{className:j(o.row,e.disabled&&o.disabled),onClick:()=>{e.disabled||(console.log({node:e}),i(e.id))},style:{paddingLeft:d*F},children:[c?t.jsx(y.Transparent,{isIcon:!0,onClick:a=>{a.stopPropagation(),r(e.id)},disabled:e.disabled,children:l[e.id]?t.jsx(h.ChevronDown,{circle:!1,size:48}):t.jsx(h.Chevron,{circle:!1,size:48})}):null,t.jsxs(v.Row,{alignItems:"center",dangerous:{backgroundColor:e.disabled?"var(--neutral)":"var(--positive)",padding:"var(--gap-1)",border:"var(--border)",borderRadius:"var(--border-radius)",boxShadow:"var(--box-shadow)"},children:[t.jsx(m,{type:e.type}),t.jsx(f.Bold,{children:e.title})]})]}),c&&l[e.id]&&e.children.length>0&&t.jsx("ul",{className:o.ul,children:e.children.map(a=>t.jsx(I,{node:a,depth:d+1,toggleExpand:r,setSelectedId:i,expanded:l},a.id))})]})}function b(s,e){const d=s[e];return d?{id:d.id,title:d.title,type:d.type,children:d.childIds.map(i=>b(s,i)),disabled:d.disabled??!1}:{id:e,title:"(missing)",type:"folder",children:[]}}const T={0:{id:0,title:"Macintosh HD",type:"folder",childIds:[1,2,8],parentId:null},1:{id:1,title:"Applications",type:"folder",childIds:[3,4],parentId:0},2:{id:2,title:"Users",type:"folder",childIds:[5,6],parentId:0},3:{id:3,title:"Visual Studio Code.app",type:"file",childIds:[],parentId:1},4:{id:4,title:"iTerm.app",type:"file",childIds:[],parentId:1},5:{id:5,title:"alice",type:"folder",childIds:[7],parentId:2},6:{id:6,title:"shared",type:"folder",childIds:[],parentId:2,disabled:!0},7:{id:7,title:"todo.txt",type:"file",childIds:[],parentId:5},8:{id:8,title:"Library",type:"folder",childIds:[],parentId:0}};function N(s){const[e,d]=n.useState(s),[i,r]=n.useState(0),[l,c]=n.useState({0:!0}),a=n.useMemo(()=>b(e,0),[e]),g=n.useCallback(p=>c(u=>({...u,[p]:!u[p]})),[]);return{state:e,dispatch:d,tree:a,selectedId:i,setSelectedId:r,expanded:l,toggleExpand:g}}function D(){const{tree:s,state:e,selectedId:d,setSelectedId:i,expanded:r,toggleExpand:l}=N(T);return t.jsxs(t.Fragment,{children:[t.jsxs(S,{mood:"negative",fitContent:!0,children:[t.jsxs(f.Bold,{children:[" ",e[d]?.title??"(none)"]}),t.jsx(m,{type:e[d]?.type??""})]}),t.jsx("br",{}),t.jsx(_,{breakEqualHeight:!0,gap:{xs:"var(--gap-2)"},gridTemplateColumns:{xs:"1fr",sm:"1fr 1.7fr"},children:t.jsx("ul",{className:o.ul,children:t.jsx(I,{expanded:r,setSelectedId:i,toggleExpand:l,node:s,depth:0})})})]})}export{D as default};
