import{j as e,r,D as k,E as T,d as w,H as A,h as _,J as b,K as O,L as z,M as V,G as N,B as h,F as S,I as F,c as D}from"./index-ClxU07Z-.js";import{S as R}from"./index-nX-RrN1p.js";const H="_dialog_1kif1_1",$="_overlay_1kif1_14",U="_content_1kif1_30",P="_tray_1kif1_34",B="_isOpen_1kif1_53",K="_sheet_1kif1_57",G="_sentinel_1kif1_91",p={dialog:H,overlay:$,content:U,tray:P,isOpen:B,sheet:K,sentinel:G};function M({onClose:s,children:t,isOpen:n,...l}){const i=r.useRef(null),{keyboardProps:c}=k({onKeyDown:a=>{a.key==="Escape"&&n&&(a.preventDefault(),s())}});return n?T.createPortal(e.jsx("div",{...l,ref:i,className:w(l.className,p.dialog),tabIndex:-1,role:"dialog","aria-modal":"true",...c,children:e.jsx(A,{contain:!0,restoreFocus:!0,autoFocus:!0,children:t})}),document.body):null}const W=({children:s,className:t,dangerous:n})=>e.jsx("header",{...t!==void 0&&{className:t},..._(n)&&{style:n},children:s}),q=({children:s,className:t,dangerous:n})=>e.jsx("div",{className:w(p.content,t),..._(n)&&{style:n},children:s}),J=({children:s,className:t,dangerous:n})=>e.jsx("footer",{...t!==void 0&&{className:t},..._(n)&&{style:n},children:s}),y=Object.assign(M,{Actions:J,Title:W,Content:q});function Q({isOpen:s,onClose:t,trigger:n,unTrigger:l,children:i,className:c}){const a=r.useRef(null),u=r.useRef(null),o=r.useRef(null),x=r.useCallback(()=>{t(),u.current?.scrollIntoView({behavior:"smooth"})},[t]);r.useEffect(()=>{s?o.current?.scrollIntoView({behavior:"smooth"}):u.current?.scrollIntoView({behavior:"smooth"})},[s]);const{keyboardProps:m}=k({onKeyDown:g=>{(g.key==="Escape"||g.key==="C")&&s&&(g.preventDefault(),t())}});return e.jsxs(e.Fragment,{children:[n?.({isOpen:s}),e.jsxs("div",{ref:a,className:w(p.sheet,c),"data-open":s?"true":"false","aria-hidden":!s,...m,children:[e.jsx("div",{ref:u,className:p.sentinel}),e.jsx("menu",{ref:o,className:p.menu,"aria-label":"Actions",children:i}),e.jsx("menu",{className:p.menu,children:l({isOpen:s,onClose:x})})]})]})}function X(){const[s,t]=r.useState(()=>I());return r.useEffect(()=>{const n=()=>t(I());return visualViewport?visualViewport.addEventListener("resize",n):window.addEventListener("resize",n),()=>{visualViewport?visualViewport.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),s}function I(){return{width:window?.visualViewport?.width??window?.innerWidth,height:window?.visualViewport?.height??window?.innerHeight}}function Y({children:s,onClose:t,isOpen:n,...l}){const i=r.useRef(null),{keyboardProps:c}=k({onKeyDown:g=>{g.key==="Escape"&&n&&(g.preventDefault(),t())}}),a=X(),[u,o]=r.useState(a.height),x=r.useRef(0);r.useEffect(()=>{clearTimeout(x.current),a.height<u&&a.height<window.innerHeight?x.current=setTimeout(()=>{o(a.height)},500):o(a.height)},[u,a.height]);const m={"--tray-min-height":`${u}px`};return n?T.createPortal(e.jsx("div",{className:p.overlay,children:e.jsx("div",{...c,...l,ref:i,className:w(p.tray,p.isOpen),tabIndex:-1,role:"dialog","aria-modal":"true",style:m,children:e.jsx(A,{contain:!0,restoreFocus:!0,autoFocus:!0,children:s})})}),document.body):null}function Z(s){const[t,n]=b("looseURL",O(s));return{state:t,onClose:()=>n(null),onOpen:c=>n(c)}}const ee=["dialog","tray","sheet"],E=["cart"],C=[...ee,...E];function ne(){const[s,t]=b("dialogs",O(C)),n=()=>t(C[0]),l=()=>t(C[1]),i=()=>t(C[2]),c=()=>t(E[0]),a=()=>t(null),[u,o]=b("selection",z(V)),x=r.useCallback(j=>o(v=>{const f=v??[];return f.includes(j)?f:[...f,j]}),[o]),m=r.useCallback(j=>o(v=>(v??[]).filter(f=>f!==j)),[o]),g=r.useCallback(j=>o(v=>{const f=v??[];return f.includes(j)?f.filter(L=>L!==j):[...f,j]}),[o]),d=r.useCallback(()=>o(null),[o]);return{onClose:a,dialogs:s,onOpenSheet:i,onOpenTray:l,onOpenDialog:n,onOpenCart:c,selection:u,toggleSelection:g,addToSelection:x,removeFromSelection:m,clearSelection:d}}function oe(){const{onOpenTray:s,onOpenDialog:t,onOpenSheet:n,dialogs:l,onClose:i}=ne(),c=l==="tray",a=l==="dialog",u=l==="sheet",{state:o,onOpen:x,onClose:m}=Z(["tray2"]),g=o==="tray2";return e.jsxs(e.Fragment,{children:[e.jsxs(N.Row,{flexWrap:"wrap",children:[e.jsx(h,{onClick:()=>t(),children:"Dialog open"}),e.jsx(h,{onClick:()=>s(),children:"Tray open"}),e.jsx(h,{onClick:()=>x("tray2"),children:"Tray open 2"}),e.jsxs(Q,{trigger:({isOpen:d})=>e.jsx(h,{type:"button",onClick:()=>n(),"aria-expanded":d,children:"Show action sheet"}),unTrigger:({onClose:d})=>e.jsx(h,{type:"reset",onClick:d,children:"Cancel"}),isOpen:u,onClose:()=>i(),children:[e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 1"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 2"}),e.jsx(h,{onClick:d=>d.preventDefault(),children:"Action 3"})]})]}),e.jsx("br",{}),e.jsxs(y,{isOpen:a,onClose:()=>i(),children:[e.jsxs(y.Title,{dangerous:{display:"flex",alignItems:"center",borderBottom:"var(--border)",minHeight:"var(--min-height)",padding:"0 var(--gap-2) 0 var(--gap-3)"},children:[e.jsx(S,{children:"Lorem ipsun dolor"}),e.jsx(h.Icon,{className:"ml-a",onClick:()=>i(),isText:!0,children:e.jsx(F.X,{size:36,circle:!1})})]}),e.jsx(y.Content,{dangerous:{placeContent:"center",textAlign:"center"},children:e.jsx(R.Triangle,{size:50})}),e.jsx(y.Actions,{dangerous:{display:"flex",alignItems:"center",borderTop:"var(--border)",minHeight:"var(--min-height)",justifyContent:"flex-end",padding:"var(--gap-2) var(--gap-4) var(--gap-2)"},children:e.jsx(h,{onClick:()=>i(),children:"Close"})})]}),e.jsxs(Y,{isOpen:c||g,onClose:D(i,m),children:[e.jsx(y.Title,{dangerous:{display:"flex",alignItems:"center",borderBottom:"var(--border)",minHeight:"var(--min-height)",padding:"0 var(--gap-2) 0 var(--gap-3)"},children:e.jsx(S,{children:"Lorem ipsun dolor"})}),e.jsx(y.Content,{dangerous:{placeContent:"center",textAlign:"center"},children:e.jsx(R.Square,{size:50})}),e.jsx(y.Actions,{className:"mt-a",dangerous:{display:"flex",alignItems:"center"},children:e.jsx(h,{stretch:!0,onClick:D(i,m),children:"Close"})})]})]})}export{oe as default};
